<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />

    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

    <title>Restaurant Reservation</title>
  </head>
  <body>
    <div class="container">
      <div class="jumbotron">
        <h1>Restaurant Reservation</h1>
        <h3>The greatest restaurant!</h3>
        <hr />
        <a href="/reservation"
          ><button class="btn btn-lg btn-danger">
            <span class="fa fa-credit-card"></span> Make Reservation
          </button></a
        >

        <a href="/"
          ><button class="btn btn-lg btn-light">
            <span class="fa fa-home"></span></button
        ></a>
      </div>
    </div>

    <div class="container">
      <div class="row">
        <div class="col-lg-12">
          <!-- Current Tables in Use -->
          <div class="card">
            <div class="card-header">
              <h4>Current Reservations</h4>
            </div>
            <div class="card-body">
                <ul id = "tableList">
                    
                </ul>
              <!-- <ul id="tableList" class="list-group"><li class="list-group-item mt-4"><h2>Table #1</h2><hr><h2>ID: wef</h2><h2>Name: ef</h2><h2>Email: wef</h2><h2>Phone: wfe</h2></li><li class="list-group-item mt-4"><h2>Table #2</h2><hr><h2>ID: whereAreMyShoes</h2><h2>Name: Shoeless Joe Jackson</h2><h2>Email: shoelessjoe@noshoes.com</h2><h2>Phone: 555-1212</h2></li><li class="list-group-item mt-4"><h2>Table #3</h2><hr><h2>ID: 12</h2><h2>Name: Robert "); DROP TABLE reservations; Roberts</h2><h2>Email: </h2><h2>Phone: </h2></li><li class="list-group-item mt-4"><h2>Table #4</h2><hr><h2>ID: ErogAe</h2><h2>Name: Wei Boe</h2><h2>Email: BobisPoe@gmail.Bob</h2><h2>Phone: 719-000-2314</h2></li><li class="list-group-item mt-4"><h2>Table #5</h2><hr><h2>ID: </h2><h2>Name: Chris</h2><h2>Email: </h2><h2>Phone: </h2></li></ul> -->
            </div>
          </div>

          <!-- Waiting List Card -->
          <div class="card mt-4">
            <div class="card-header">
              <h4>Waiting List</h4>
            </div>
            <div class="card-body">
                <ul id = "waitList">

                </ul>
              <!-- <ul id="waitList" class="list-group"><li class="list-group-item mt-4"><h2>Table #1</h2><hr><h2>ID: 22321</h2><h2>Name: 2</h2><h2>Email: 12</h2><h2>Phone: 1</h2></li></ul> -->
            </div>
          </div>
        </div>
      </div>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="server.js"></script>
    <script>
        $(document).ready(function(){
            $.get("/api/reservations",function(data){
                var reservation1= data;
                var num;
                if(reservation1.length>=5){
                    num=5;
                    for(var i=0;i<num;++i){
                    $("#tableList").append(`<li><h2 id="tableNumber">Table ${i+1}</h2><br>
                                <h2 id="name">${reservation1[i].name}</h2><br>
                                <h3 id="phoneNumber">${reservation1[i].phone}</h3><br>
                                <h3 id="email">${reservation1[i].email}</h3><br></li>`)
                } 
            } else {for(var i=0;i<reservation1.length; ++i){
                    $("#tableList").append(`<li><h2 id="tableNumber">Table ${i+1}</h2><br>
                                <h2 id="name"></h2>${reservation1[i].name}</h2><br>
                                <h3 id="phoneNumber">${reservation1[i].phone}</h3><br>
                                <h3 id="email">${reservation1[i].email}</h3><br></li>`)
                }}
                
            });
      });
    </script>
  </body>
</html>
